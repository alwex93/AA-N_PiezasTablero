<html>
<head>
<title>FreeMarker: Java Transformation Test</title>
</head>
<body bgcolor="#ffffff">

<p>A simple test follows:</p>

<p>Hello, world!</p>

<pre><font color="#0000ff">package</font> guestbook<b>;</b>

<font color="#0000ff">import</font> freemarker<b>.</b>template<b>.*;</b>
<font color="#0000ff">import</font> java<b>.</b>util<b>.</b><font color="#804040">Date</font><b>;</b>
<font color="#0000ff">import</font> java<b>.</b>util<b>.</b><font color="#804040">TimeZone</font><b>;</b>
<font color="#0000ff">import</font> java<b>.</b>text<b>.</b>DateFormat<b>;</b>

<font color="#0000ff">public</font> <font color="#0000ff">class</font> GuestbookEntryTM <font color="#0000ff">implements</font> TemplateHashModel <b>{</b>

    <font color="#0000ff">private</font> GuestbookEntry entry<b>;</b>

    <font color="#0000ff">private</font> SimpleScalar date<b>;</b>
    <font color="#0000ff">private</font> SimpleScalar name<b>;</b>
    <font color="#0000ff">private</font> SimpleScalar message<b>;</b>

    <font color="#0000ff">public</font> <b>GuestbookEntryTM(</b>GuestbookEntry entry<b>)</b> <b>{</b>
        <font color="#0000ff">this</font><b>.</b>entry <b>=</b> entry<b>;</b>
    <b>}</b>

    <font color="#0000ff">public</font> TemplateModel <b>get(</b><font color="#804040">String</font> key<b>)</b> <font color="#0000ff">throws</font> <font color="#ff0000">TemplateModelException</font> <b>{</b>
        <font color="#0000ff">if</font> <b>(</b>key<b>.equals(</b><font color="#808080">"date"</font><b>))</b> <b>{</b>
            <font color="#0000ff">return</font> <b>getDate();</b>
        <b>}</b> <font color="#0000ff">else</font> <font color="#0000ff">if</font> <b>(</b>key<b>.equals(</b><font color="#808080">"name"</font><b>))</b> <b>{</b>
            <font color="#0000ff">return</font> <b>getName();</b>
        <b>}</b> <font color="#0000ff">else</font> <font color="#0000ff">if</font> <b>(</b>key<b>.equals(</b><font color="#808080">"message"</font><b>))</b> <b>{</b>
            <font color="#0000ff">return</font> <b>getMessage();</b>
        <b>}</b> <font color="#0000ff">else</font> <b>{</b>
            <font color="#0000ff">return</font> <font color="#0000ff">null</font><b>;</b>
        <b>}</b>
    <b>}</b>

    <font color="#0000ff">private</font> TemplateModel <b>getDate()</b> <b>{</b>
        <font color="#0000ff">if</font> <b>(</b>date <b>==</b> <font color="#0000ff">null</font><b>)</b> <b>{</b>
            DateFormat dateFormat <b>=</b> DateFormat<b>.getDateTimeInstance(</b>DateFormat<b>.</b>MEDIUM<b>,</b>
                                                                   DateFormat<b>.</b>LONG<b>);</b>
            dateFormat<b>.setTimeZone(</b><font color="#804040">TimeZone</font><b>.getTimeZone(</b><font color="#808080">"GMT"</font><b>));</b>
            date <b>=</b> <font color="#0000ff">new</font> <b>SimpleScalar(</b>dateFormat<b>.format(</b>entry<b>.getDate()));</b>
        <b>}</b>
        <font color="#0000ff">return</font> date<b>;</b>
    <b>}</b>

    <font color="#0000ff">private</font> TemplateModel <b>getName()</b> <b>{</b>
        <font color="#0000ff">if</font> <b>(</b>name <b>==</b> <font color="#0000ff">null</font><b>)</b> <b>{</b>
            name <b>=</b> <font color="#0000ff">new</font> <b>SimpleScalar(</b>entry<b>.getName());</b>
        <b>}</b>
        <font color="#0000ff">return</font> name<b>;</b>
    <b>}</b>

    <font color="#0000ff">private</font> TemplateModel <b>getMessage()</b> <b>{</b>
        <font color="#0000ff">if</font> <b>(</b>message <b>==</b> <font color="#0000ff">null</font><b>)</b> <b>{</b>
            message <b>=</b> <font color="#0000ff">new</font> <b>SimpleScalar(</b>entry<b>.getMessage());</b>
        <b>}</b>
        <font color="#0000ff">return</font> message<b>;</b>
    <b>}</b>

    <font color="#0000ff">public</font> <font color="#ff8000">boolean</font> <b>isEmpty()</b> <font color="#0000ff">throws</font> <font color="#ff0000">TemplateModelException</font> <b>{</b>
        <font color="#0000ff">return</font> <b>(</b>entry <b>==</b> <font color="#0000ff">null</font><b>);</b>
    <b>}</b>
<b>}</b>

</pre>
</body>
</html>
